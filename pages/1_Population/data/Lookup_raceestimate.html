---
layout: page
title: "Race Estimates"
permalink: "/population/data/race-estimate/"
custom_js:
- /assets/js/FileSaver.min.js
- /assets/js/common/dola_custom_functions.js
file: 
- "https://console.cloud.google.com/m/cloudstorage/b/co-publicdata/o/race-estimates-county.csv"
- "https://console.cloud.google.com/m/cloudstorage/b/co-publicdata/o/race-estimates-region.csv"
description: "Search for information on population by year, sex, age and race."
years: "2011-2014"
tag: "popdata"

---
{% if page.custom_js %}
  {% for js_file in page.custom_js %}
  <script src='{{ js_file }}' type="text/javascript"></script>
  {% endfor %}
{% endif %}


<h2 id="county-race-by-age-estimates">Race by Age Estimates - County</h2>

<a href="/population/data/race-estimate-regions/">Need Region Data?</a><br /><br />
<label for="countiesSelected" style="font-weight: bold;">Select 1 or more counties:</label><br />
<select id="countiesSelected" name="countiesSelected" multiple="multiple" size="5">	
{% include _optionValuesCounty.html %}
</select><br /><br />
<label for="yearsSelected" style="font-weight: bold;">Select 1 or more years:</label><br />
<select id="yearsSelected" name="yearsSelected" multiple="multiple" size="4">
<!-- populated from database -->
</select><br /><br />
<label for="ageGroups" style="font-weight: bold;">Select 1 or more age groups:</label><br />
<select id="ageGroups" name="ageGroups" multiple="multiple" size="5">
  <option value="0">Age 0</option>
	<option value="1">Age 1</option>
	<option value="2">Age 2</option>
  <option value="3">Age 3</option>
	<option value="4">Age 4</option>
	<option value="5">Age 5</option>  
  <option value="6">Age 6</option>
	<option value="7">Age 7</option>
	<option value="8">Age 8</option>
	<option value="9">Age 9</option>
	<option value="10">Age 10</option>  
	<option value="11">Age 11</option>
	<option value="12">Age 12</option>
  <option value="13">Age 13</option>
	<option value="14">Age 14</option>
	<option value="15">Age 15</option>  
  <option value="16">Age 16</option>
	<option value="17">Age 17</option>
	<option value="18">Age 18</option>
	<option value="19">Age 19</option>
	<option value="20">Age 20</option>  
	<option value="21">Age 21</option>
	<option value="22">Age 22</option>
  <option value="23">Age 23</option>
	<option value="24">Age 24</option>
	<option value="25">Age 25</option>  
  <option value="26">Age 26</option>
	<option value="27">Age 27</option>
	<option value="28">Age 28</option>
	<option value="29">Age 29</option>
	<option value="30">Age 30</option>  
	<option value="31">Age 31</option>
	<option value="32">Age 32</option>
  <option value="33">Age 33</option>
	<option value="34">Age 34</option>
	<option value="35">Age 35</option>  
  <option value="36">Age 36</option>
	<option value="37">Age 37</option>
	<option value="38">Age 38</option>
	<option value="39">Age 39</option>
	<option value="40">Age 40</option>  
	<option value="41">Age 41</option>
	<option value="42">Age 42</option>
  <option value="43">Age 43</option>
	<option value="44">Age 44</option>
	<option value="45">Age 45</option>  
  <option value="46">Age 46</option>
	<option value="47">Age 47</option>
	<option value="48">Age 48</option>
	<option value="49">Age 49</option>
	<option value="50">Age 50</option>  
	<option value="51">Age 51</option>
	<option value="52">Age 52</option>
  <option value="53">Age 53</option>
	<option value="54">Age 54</option>
	<option value="55">Age 55</option>  
  <option value="56">Age 56</option>
	<option value="57">Age 57</option>
	<option value="58">Age 58</option>
	<option value="59">Age 59</option>
	<option value="60">Age 60</option>  
	<option value="61">Age 61</option>
	<option value="62">Age 62</option>
  <option value="63">Age 63</option>
	<option value="64">Age 64</option>
	<option value="65">Age 65</option>  
  <option value="66">Age 66</option>
	<option value="67">Age 67</option>
	<option value="68">Age 68</option>
	<option value="69">Age 69</option>
	<option value="70">Age 70</option>  
	<option value="71">Age 71</option>
	<option value="72">Age 72</option>
  <option value="73">Age 73</option>
	<option value="74">Age 74</option>
	<option value="75">Age 75</option>  
  <option value="76">Age 76</option>
	<option value="77">Age 77</option>
	<option value="78">Age 78</option>
	<option value="79">Age 79</option>
	<option value="80">Age 80</option>  
	<option value="81">Age 81</option>
	<option value="82">Age 82</option>
  <option value="83">Age 83</option>
	<option value="84">Age 84</option>
	<option value="85">Age 85</option>  
  <option value="86">Age 86</option>
	<option value="87">Age 87</option>
	<option value="88">Age 88</option>
	<option value="89">Age 89</option>
	<option value="90">Age 90+</option>    
</select><br /><br />
<label for="raceGroups" style="font-weight: bold;">Select 1 or more race categories:</label><br />
<select id="raceGroups" name="raceGroups" multiple="multiple" size="5">
  <option value="1">Hispanic</option>
	<option value="2">White non Hispanic</option>
	<option value="3">Asian non Hispanic</option>
	<option value="4">American Indian non Hispanic</option>
	<option value="5">Black non Hispanic</option>
	<!--<option value="6">Total</option>-->
</select><br /><br />
<label for="groupBy" style="font-weight: bold;">Select 0 or more variables to summarize by:</label><br />
<select id="groupBy" name="groupBy" multiple="multiple" size="4">
  <option value="a">Year</option>
	<option value="b">County</option>
	<option value="c">Age Group</option>
	<option value="d">Race</option>
</select><br /><br />
<input type="radio" name="compressed" value="" checked>Sum Male and Female&nbsp;&nbsp;&nbsp;
<input type="radio" name="compressed" value="&sex=m">Male Only&nbsp;&nbsp;&nbsp;
<input type="radio" name="compressed" value="&sex=f">Female Only&nbsp;&nbsp;&nbsp;
<input type="radio" name="compressed" value="&sex=b">List Male and Female<br />
<br />
<input type="submit" id="callapi" value="View Results" class="form-submit" />
<br /><br /><br />
<input type="submit" id="dlcsv" value="Download CSV" style="display:none;" /><br />
<table id="resultstable"></table>

<script>
  
    fetchJSONFile('https://gis.dola.colorado.gov/lookups/sya-race-estimatesYRS', function(yrs) {
        var queriedYears = "";
        for (let i = 0; i < yrs.length; i++) {
            queriedYears += "<option value='" + yrs[i].year + "'>" + yrs[i].year + "</option>";
        }
        document.getElementById('yearsSelected').innerHTML = queriedYears;
    });


    document.getElementById('callapi').addEventListener('click', function() {

        var selectedCounties = getSelectValues(countiesSelected);
        var selectedYears = getSelectValues(yearsSelected);
        var selectedAges = getSelectValues(ageGroups);
        var selectedRaces = getSelectValues(raceGroups);
        var selectedGroupBy = getSelectValues(groupBy);

        if (selectedCounties.length === 0) {
            alert('please choose a county selection');
            return;
        }
        if (selectedYears.length === 0) {
            alert('please choose one or more years');
            return;
        }
        if (selectedAges.length === 0) {
            alert('please choose an age group selection');
            return;
        }
        if (selectedRaces.length === 0) {
            alert('please choose a race selection');
            return;
        }

        var compressed = document.querySelector('input[name="compressed"]:checked').value;

        var groupstring = selectedGroupBy.join(",");
        var group = "";

        if (groupstring === "a") {
            group = 'opt1';
        }
        if (groupstring === "b") {
            group = 'opt2';
        }
        if (groupstring === "c") {
            group = 'opt3';
        }
        if (groupstring === "d") {
            group = 'opt4';
        }
        if (groupstring === "a,b") {
            group = 'opt5';
        }
        if (groupstring === "a,c") {
            group = 'opt6';
        }
        if (groupstring === "a,d") {
            group = 'opt7';
        }
        if (groupstring === "b,c") {
            group = 'opt8';
        }
        if (groupstring === "b,d") {
            group = 'opt9';
        }
        if (groupstring === "c,d") {
            group = 'opt10';
        }
        if (groupstring === "a,b,c") {
            group = 'opt11';
        }
        if (groupstring === "a,b,d") {
            group = 'opt12';
        }
        if (groupstring === "a,c,d") {
            group = 'opt13';
        }
        if (groupstring === "b,c,d") {
            group = 'opt14';
        }

        var querystring = "year=" + selectedYears.join(",") + "&county=" + selectedCounties.join(",") + "&age=" + selectedAges.join(",") + "&race=" + selectedRaces.join(",") + compressed + "&group=" + group;

        fetchJSONFile("https://gis.dola.colorado.gov/lookups/sya-race-estimates?" + querystring, function(text) {
            /* make Download CSV button visible */
            document.getElementById("dlcsv").style.display = 'inline-block';
            createtable(text);
        });

    }, false);


    function createtable(results) {

        var table = document.getElementById("resultstable");
        table.innerHTML = ""; /*clear all previous content*/

        var header = table.createTHead();
        var hrow = header.insertRow(0);
        var hcell1 = hrow.insertCell(0);
        var hcell2 = hrow.insertCell(1);
        var hcell3 = hrow.insertCell(2);
        var hcell4 = hrow.insertCell(3);
        var hcell5 = hrow.insertCell(4);
        var hcell6 = hrow.insertCell(5);
        var hcell7 = hrow.insertCell(6);

        hcell1.innerHTML = "COUNTY";
        hcell2.innerHTML = "CFIPS";
        hcell3.innerHTML = "YEAR";
        hcell4.innerHTML = "AGE";
        hcell5.innerHTML = "SEX";
        hcell6.innerHTML = "RACE";
        hcell7.innerHTML = "COUNT";

        var body = table.appendChild(document.createElement('tbody'));

        for (var i = 0; i < results.length; i++) {
            var pass_age = results[i].age || "";
            if (results[i].age === 0) {
                pass_age = "0";
            }
            addrow(i, clookup(results[i].county_fips) || "", results[i].county_fips || "", results[i].year || "", pass_age, results[i].sex || "", results[i].race || "", results[i].count);
        }

    }


    function addrow(rownum, county, county_fips, year, age, sex, race, count) {

        var tableRef = document.getElementById('resultstable').getElementsByTagName('tbody')[0];

        /* Create an empty <tr> element and add it to the 1st position of the table:*/
        var row = tableRef.insertRow(rownum);

        /* Insert new cells (<td> elements) at the 1st and 2nd position of the "new" <tr> element:*/
        var cell1 = row.insertCell(0);
        var cell2 = row.insertCell(1);
        var cell3 = row.insertCell(2);
        var cell4 = row.insertCell(3);
        var cell5 = row.insertCell(4);
        var cell6 = row.insertCell(5);
        var cell7 = row.insertCell(6);

        /* Add some text to the new cells:*/
        cell1.innerHTML = county;
        cell2.innerHTML = county_fips;
        cell3.innerHTML = year;
        cell4.innerHTML = age;
        cell5.innerHTML = sex;
        cell6.innerHTML = race;
        cell7.innerHTML = Number(count).toLocaleString();

    }


    document.getElementById('dlcsv').addEventListener('click', function() {
        dlcsv("resultstable", "county-raceEstimate_data.csv");
    }, false);
  
</script>